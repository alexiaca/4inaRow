/**
 * grrd's 4 in a Row
 * Copyright (c) 2012 Gerard Tyedmers, grrd@gmx.net
 * @license MPL-2.0
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
!function(){"use strict";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var e,t,n,o=function(e){return document.getElementById(e)},i=!1,a=!1,l=["col0","col1","col2","col3","col4","col5","col6"],r=[],s=[],c=[];for(e=0;e<6;e+=1)c[e]=[],c[e][6]=void 0;var d,m,g,u,h,f,p,w,v,_,L,y,b,I,E,S,k,M,P,C,T,B,H,A,q,O,z,D,F,N,R,x,j,W,U=[],G=[],X=null,K=!0,J=!1,Q=!1,V=o("game"),Y=o("title"),Z=o("popupInfo"),$=o("popupStats"),ee=o("popupSettings"),te=o("inputImage"),ne=o("inputName"),oe=o("b_sound"),ie=o("l_country"),ae=o("txt_search"),le=o("bt_country"),re=o("P1country"),se=o("P2country"),ce=[],de=[],me=["#ff0080","#6969EE"],ge=["#D6016B","#5A5ACE"],ue=["#FD6BB4","#9393EF"],he=0,fe=["Images/red_on.png","Images/red_off.png"],pe=["Images/blue_on.png","Images/blue_off.png"],we=0,ve=[0,0],_e=Boolean(!1),Le=null,ye=0,be=!1,Ie=!1,Ee=function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();function Se(e){e.classList.remove("popup-init"),e.classList.remove("popup-hide"),e.classList.add("popup-show")}function ke(e){e.classList.remove("popup-show"),e.classList.add("popup-hide"),setTimeout((function(){e.scrollTop=0}),1050)}function Me(e,t,n,o){s[t].beginPath(),s[t].arc(M/2,e,M/2*.85,0,2*Math.PI,!1),s[t].fillStyle=n,s[t].fill(),s[t].lineWidth=M/20,s[t].strokeStyle=o,s[t].stroke()}function Pe(){var e,o,i;for(t=document.documentElement.clientHeight,n=document.documentElement.clientWidth,t>n?(M=Math.min((n-50)/7,(t-140)/6),P=Math.max(6*M*.85,t-190)):(M=Math.min((n-140-60)/7,(t-20)/6),P=Math.max(6*M*.85,t-95)),e=0;e<l.length;e+=1)document.getElementById(l[e]).width=M,document.getElementById(l[e]).height=P;for(o=0;o<c[0].length&&void 0!==s[o];o+=1)for(e=0;e<c.length;e+=1)(i=s[o].createLinearGradient(0,.9*(c.length-e-1)*M,.7*M,.9*(c.length-e-1)*M+.7*M)).addColorStop(0,"black"),i.addColorStop(1,"grey"),s[o].beginPath(),s[o].arc(M/2,(c.length-e-.5)*M*.85,M/2*.7,0,2*Math.PI,!1),s[o].lineWidth=M/10,s[o].strokeStyle=i,s[o].stroke();for(o=0;o<c[0].length&&void 0!==s[o];o+=1){for(s[o].save(),s[o].beginPath(),e=0;e<c.length;e+=1)s[o].arc(M/2,(c.length-e-.5)*M*.85,M/2*.7,0,2*Math.PI,!1);s[o].clip(),s[o].clearRect(0,0,M,P)}for(e=0;e<c.length;e+=1)for(o=0;o<c[e].length;o+=1)void 0!==c[e][o]&&Me((c.length-e-.5)*M*.85,o,me[c[e][o]],ge[c[e][o]]);a&&(k=k/S*((c.length-L-.5)*M*.85),S=(c.length-L-.5)*M*.85)}function Ce(){var e,t;for(ye=0,Le=null,e=0;e<c.length;e+=1)for(t=0;t<c[e].length;t+=1)c[e][t]=void 0,0===e&&s[t].clearRect(0,0,M,P);Pe()}function Te(){o("P1light").src=fe[he],o("P2light").src=pe[1-he]}function Be(){var e,t;Ee?(e=parseInt(localStorage.getItem(X+"_win")||0),t=parseInt(localStorage.getItem(X+"_loose")||0)):(e=0,t=0),"online"===X?(C=Math.max(e+t,F+N,1),o("P"+(1+parseInt(x.role))+"win").style.width=100/C*e+"%",o("P"+(1+parseInt(x.role))+"loose").style.width=100/C*t+"%",o("P"+(2-parseInt(x.role))+"win").style.width=100/C*F+"%",o("P"+(2-parseInt(x.role))+"loose").style.width=100/C*N+"%"):("2player"===X&&(e=ve[0],t=ve[1]),C=Math.max(e+t,1),o("P1win").style.width=100/C*e+"%",o("P1loose").style.width=100/C*t+"%",o("P2win").style.width=100/C*t+"%",o("P2loose").style.width=100/C*e+"%")}function He(e){var t,n;Ee&&(X&&e&&(t=X+"_"+e,n=parseInt(localStorage.getItem(t)||0)+1,localStorage.setItem(t,n)),H=localStorage.getItem("easy_win")||0,A=localStorage.getItem("easy_loose")||0,q=localStorage.getItem("medium_win")||0,O=localStorage.getItem("medium_loose")||0,z=localStorage.getItem("hard_win")||0,D=localStorage.getItem("hard_loose")||0,T=localStorage.getItem("online_win")||0,B=localStorage.getItem("online_loose")||0,C=Math.max(H,A,q,O,z,D,T,B,1),document.getElementById("easy_win").innerHTML=document.webL10n.get("lb_won")+" "+H,document.getElementById("easy_loose").innerHTML=document.webL10n.get("lb_lost")+" "+A,document.getElementById("medium_win").innerHTML=document.webL10n.get("lb_won")+" "+q,document.getElementById("medium_loose").innerHTML=document.webL10n.get("lb_lost")+" "+O,document.getElementById("hard_win").innerHTML=document.webL10n.get("lb_won")+" "+z,document.getElementById("hard_loose").innerHTML=document.webL10n.get("lb_lost")+" "+D,document.getElementById("online_win").innerHTML=document.webL10n.get("lb_won")+" "+T,document.getElementById("online_loose").innerHTML=document.webL10n.get("lb_lost")+" "+B,document.getElementById("easy_win").style.width=100/C*H+"%",document.getElementById("easy_loose").style.width=100/C*A+"%",document.getElementById("medium_win").style.width=100/C*q+"%",document.getElementById("medium_loose").style.width=100/C*O+"%",document.getElementById("hard_win").style.width=100/C*z+"%",document.getElementById("hard_loose").style.width=100/C*D+"%",document.getElementById("online_win").style.width=100/C*T+"%",document.getElementById("online_loose").style.width=100/C*B+"%")}function Ae(e){e.classList.remove("_African_Union","_Arab_League","_ASEAN","_CARICOM","_CIS","_Commonwealth","_England","_European_Union","_Islamic_Conference","_Kosovo","_NATO","_Northern_Cyprus","_Northern_Ireland","_Olimpic_Movement","_OPEC","_Red_Cross","_Scotland","_Somaliland","_Tibet","_United_Nations","_Wales","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bw","by","bz","ca","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","fi","fj","fm","fo","fr","ga","gb","gd","ge","gg","gh","gi","gl","gm","gn","gp","gq","gr","gt","gu","gw","gy","hk","hn","hr","ht","hu","id","mc","ie","il","im","in","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","md","me","mg","mh","mk","ml","mm","mn","mo","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","ng","ni","nl","no","np","nr","nz","om","pa","pe","pf","pg","ph","pk","pl","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","si","sk","sl","sm","sn","so","sr","st","sv","sy","sz","tc","td","tg","th","tj","tl","tm","tn","to","tr","tt","tv","tw","tz","ua","ug","us","uy","uz","va","vc","ve","vg","vi","vn","vu","ws","ye","za","zm","zw")}function qe(e,t){be||(t+2e3>Date.now()&&a?window.requestAnimFrame((function(){qe(e,t)})):(we+=1,o("printMessage").innerHTML=e,o("printGames").innerHTML=1===we?we+" "+document.webL10n.get("lb_game"):we+" "+document.webL10n.get("lb_games"),o("printScore1a").innerHTML=p,o("printScore2a").innerHTML=w,o("printScore1b").innerHTML=ve[0],o("printScore2b").innerHTML=ve[1],Se(o("popupDialog")),a=!1))}function Oe(){a=!0,function e(t,n,o,i){var l;if(!be)if(o<6&&i+250<Date.now()&&a){for(o+=1,i=Date.now(),l=0;l<4;l+=1)Me((c.length-t[l]-.5)*M*.85,n[l],o%2!=0?ue[he]:me[he],"white");window.requestAnimFrame((function(){e(t,n,o,i)}))}else o<6&&a&&window.requestAnimFrame((function(){e(t,n,o,i)}))}(U.slice(),G.slice(),0,Date.now())}function ze(e,t,n,o,i,a){var l;if(e+3*n<c.length&&t+3*o<c[e].length&&e+3*n>=0&&t+3*o>=0)for(l=0;l<4;l+=1)c[e+l*n][t+l*o]===i?(U[l]=e+l*n,G[l]=t+l*o,3===l&&(I=!0,a&&Oe(),l=5)):l=5}function De(e,t){for(I=!1,L=0;L<c.length;L+=1)for(_=0;_<c[L].length;_+=1)ze(L,_,1,0,e,t),ze(L,_,0,1,e,t),ze(L,_,1,1,e,t),ze(L,_,1,-1,e,t);for(E=!1,_=0;_<c[0].length;_+=1)void 0===c[c.length-1][_]&&(E=!0)}function Fe(e,t,n){var o,i;a&&(o=(new Date).getTime(),i=P*(o-e)/1e3,t<S?(t=Math.min(S,t+i),e=o,s[n].clearRect(0,0,M,S+M/2*.85),Me(t,n,me[he],ge[he]),window.requestAnimFrame((function(){Fe(e,t,n)}))):(K&&document.getElementById("click_sound").play(),a=!1,De(he,!0),I?(ve[he]=ve[he]+1,"easy"!==X&&"medium"!==X&&"hard"!==X||He(0===he?"win":"loose"),"online"===X&&(0===he&&"0"===x.role||1===he&&"1"===x.role?(N+=1,He("win")):(F+=1,He("loose"))),Be(),K&&document.getElementById("ding_sound").play(),qe(0===he?p+" "+document.webL10n.get("lb_win"):w+" "+document.webL10n.get("lb_win"),Date.now())):E?(he=1-he,Te(),"2player"!==X&&"online"!==X&&1===he&&Ue()):(He("draw"),qe(document.webL10n.get("lb_draw"),Date.now()))))}function Ne(e){if(!(Ie&&(Ie=!1,"online"===X&&(0===he&&"0"===x.role||1===he&&"1"===x.role))||a))for(ye+=1,L=0,S=0;L<c.length&&0===S;){if(void 0===c[L][e]){a=!0,c[L][e]=he,S=(c.length-L-.5)*M*.85,Fe((new Date).getTime(),k=-30,e);break}L+=1}}function Re(){o("P1icon").src=J?te.src:"Images/player.svg",p=Q?ne.value:document.webL10n.get("lb_player"),Ae(re),h&&re.classList.add(h.split(" ")[1]),w=document.webL10n.get("lb_computer"),o("P1name").innerHTML=p,o("P2name").innerHTML=w,o("P2icon").src="Images/computer.svg",Ae(se),Be(),Te(),be=!1,Y.classList.remove("swipe-out-right"),V.classList.remove("swipe-in-left"),Y.classList.add("swipe-out"),V.classList.add("swipe-in")}function xe(e){"online"===X?1===he&&"0"===x.role||0===he&&"1"===x.role||(R.emit("playsend",{to:x.opponent,col:e,round:ye}),Ne(e)):Ne(e)}function je(e,t,n){var o,i;for(d=0,m=0,g=0,o=n-3;o<=n;o+=1)if(o>=0&&o+3<c[0].length){for(_e=!0,u=0,i=0;i<=3;i+=1)void 0!==c[t][o+i]&&(c[t][o+i]===e?u+=1:_e=!1);_e&&(d+=1,m+=u,u>g&&(g=u))}for(o=t+3;o>=t;o-=1)if(o-3>=0&&o<c.length){for(_e=!0,u=0,i=0;i<=3;i+=1)void 0!==c[o-i][n]&&(c[o-i][n]===e?u+=1:_e=!1);_e&&(d+=1,m+=u,u>g&&(g=u))}for(o=3;o>=0;o-=1)if(n-o>=0&&n-o+3<c[0].length&&t-o>=0&&t-o+3<c.length){for(_e=!0,u=0,i=0;i<=3;i+=1)void 0!==c[t-o+i][n-o+i]&&(c[t-o+i][n-o+i]===e?u+=1:_e=!1);_e&&(d+=1,m+=u,u>g&&(g=u))}for(o=3;o>=0;o-=1)if(n-o>=0&&n-o+3<c[0].length&&t+o<c.length&&t+o-3>=0){for(_e=!0,u=0,i=0;i<=3;i+=1)void 0!==c[t+o-i][n-o+i]&&(c[t+o-i][n-o+i]===e?u+=1:_e=!1);_e&&(d+=1,m+=u,u>g&&(g=u))}}function We(e,t){return e-t}function Ue(){var e;for(ce=[],!1,y=0;y<c[0].length;y+=1)for(ce[y]=0,b=0;b<c.length;b+=1)if(void 0===c[b][y]){c[b][y]=he,je(he,b,y),ce[y]=1e4*g+100*d+m+2,c[b][y]=void 0;break}for(de[0]=0,e=0;e<ce.length;e+=1)ce[e]>de[0]&&(de[0]=ce[e]);for(he=1-he,y=0;y<c[0].length;y+=1)for(b=0;b<c.length;b+=1)if(void 0===c[b][y]){c[b][y]=he,je(he,b,y),1e4*g+100*d+m+2>de[0]&&(ce[y]=1e4*g+100*d+m+2),c[b][y]=void 0;break}for(he=1-(he=1-he),y=0;y<c[0].length;y+=1){for(b=0;b<c.length-1;b+=1)if(void 0===c[b][y]){c[b+1][y]=he,De(he,!1),c[b+1][y]=void 0;break}I&&(ce[y]=1,I=!1)}for(he=1-(he=1-he),y=0;y<c[0].length;y+=1){for(b=0;b<c.length;b+=1)if(void 0===c[b][y]){c[b][y]=he,De(he,!1),c[b][y]=void 0;break}I&&(ce[y]=5e4,I=!1)}for(he=1-he,y=0;y<c[0].length;y+=1){for(b=0;b<c.length;b+=1)if(void 0===c[b][y]){c[b][y]=he,De(he,!1),c[b][y]=void 0;break}I&&(ce[y]=6e4,I=!1)}if((de=ce.slice()).sort(We),de.reverse(),_=Math.round(6*Math.random()),"hard"===X)for(;ce[_]!==de[0];)_=Math.round(6*Math.random());if("medium"===X)for(;ce[_]<de[1]||0===ce[_];)_=Math.round(6*Math.random());if("easy"===X)for(;ce[_]<de[2]||0===ce[_];)_=Math.round(6*Math.random());Ne(_)}function Ge(){Ce(),he=we%2!=0?1:0,Te()}function Xe(e){var t=new FileReader,n=document.createElement("canvas"),o=null,i=new Image,a=67,l=71,r={Orientation:void 0};n.id="hiddenCanvas",n.width=a,n.height=l,n.style.visibility="hidden",document.body.appendChild(n),o=n.getContext("2d"),e.target.files[0].type.match("image.*")?t.readAsDataURL(e.target.files[0]):alert("File is not an image"),t.onload=function(){var t=this.result;EXIF.getData(e.target.files[0],(function(){r.Orientation=EXIF.getTag(this,"Orientation"),i.src=t}))},i.onload=function(){var e=0,t=0;0===this.width||0===this.height?alert("Image is empty"):(5!==r.Orientation&&6!==r.Orientation||(o.rotate(90*Math.PI/180),t=-1*a,a=71,l=67),3!==r.Orientation&&4!==r.Orientation||(o.rotate(180*Math.PI/180),t=-1*a-4,e=-1*l+4),7!==r.Orientation&&8!==r.Orientation||(o.rotate(270*Math.PI/180),e=-1*l,a=71,l=67),o.clearRect(0,0,a,l),o.drawImage(i,0,0,this.width,this.height,e,t,a,l),te.src=n.toDataURL("image/jpeg"),Ee&&localStorage.setItem("s_image",n.toDataURL("image/jpeg")),J=!0)}}function Ke(e){Array.from(ie.getElementsByTagName("LI")).forEach((function(t){t.innerHTML.toLowerCase().indexOf(e)>-1||0===e.length?t.style.display="block":t.style.display="none"}))}"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("sw.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))})),navigator.onLine&&"undefined"!=typeof io||o("bt_online").classList.add("ui-disabled"),window.onload=function(){var e;if(Ee&&null!==localStorage.getItem("s_sound")?oe.checked="on"===localStorage.getItem("s_sound"):oe.checked=!0,K=oe.checked,Ee&&null!==localStorage.getItem("s_image")&&(te.src=localStorage.getItem("s_image"),J=!0),Ee&&null!==localStorage.getItem("s_name")&&(ne.value=localStorage.getItem("s_name"),""!==localStorage.getItem("s_name").replace(/\s+/g,"")&&(Q=!0)),Ee&&null!==localStorage.getItem("s_country")){for(;le.firstChild;)le.removeChild(le.firstChild);h=localStorage.getItem("s_country");var t=document.getElementsByClassName(h);le.appendChild(t[0].cloneNode(!0))}for(o("iInfo").addEventListener("click",(function(){Se(Z)})),o("iInfoClose").addEventListener("click",(function(){ke(Z)})),o("iStats").addEventListener("click",(function(){Se($)})),o("iStatsClose").addEventListener("click",(function(){ke($)})),o("iSettings").addEventListener("click",(function(){Se(ee)})),o("iSettingsClose").addEventListener("click",(function(){K=oe.checked,Ee&&localStorage.setItem("s_sound",oe.checked?"on":"off"),ke(ee)})),o("iOnlineClose").addEventListener("click",(function(){ke(o("popupOnline"))})),o("bt_country_popup").addEventListener("click",(function(){Se(o("popupCountry"))})),o("bt_play").addEventListener("click",(function(){X="2player",o("P1icon").src=J?te.src:"Images/player.svg",p=Q?ne.value:document.webL10n.get("lb_player1"),Ae(re),h&&re.classList.add(h.split(" ")[1]),Ae(se),w=document.webL10n.get("lb_player2"),o("P1name").innerHTML=p,o("P2name").innerHTML=w,o("P2icon").src="Images/player.svg",Te(),Be(),be=!1,Y.classList.remove("swipe-out-right"),V.classList.remove("swipe-in-left"),Y.classList.add("swipe-out"),V.classList.add("swipe-in")})),o("bt_online").addEventListener("click",(function(){Se(o("popupOnline")),o("bt_online").classList.add("ui-disabled"),(R=io.connect("https://grrd.a2hosted.com:49152",{forceNew:!0})).heartbeatTimeout=2e4,R.on("connect",(function(){})),R.on("startgame",(function(e){F=0,N=0,(x=e).id!==j&&(f=J?te.src:null,R.emit("usersend",{to:x.opponent,name:ne.value,pic:f,country:h,win:T,loose:B}),j=x.id,be=!1,null!==X&&(Y.classList.remove("swipe-out"),V.classList.remove("swipe-in"),Y.classList.add("swipe-out-right"),V.classList.add("swipe-in-left")),a=!1,Ce(),we=0,he=0,ve=[0,0],X="online",Te(),Be(),"0"===x.role?(o("P1icon").src=J?te.src:"Images/player.svg",p=Q?ne.value:document.webL10n.get("lb_player1"),Ae(re),h&&re.classList.add(h.split(" ")[1]),Ae(se),o("P2icon").src="Images/online.svg",w=document.webL10n.get("bt_online")):(Ae(re),o("P1icon").src="Images/online.svg",p=document.webL10n.get("bt_online"),o("P2icon").src=J?te.src:"Images/player.svg",w=Q?ne.value:document.webL10n.get("lb_player1"),Ae(se),h&&se.classList.add(h.split(" ")[1])),o("P1name").innerHTML=p,o("P2name").innerHTML=w,Y.classList.remove("swipe-out-right"),V.classList.remove("swipe-in-left"),Y.classList.add("swipe-out"),V.classList.add("swipe-in"),ke(o("popupOnline")))})),R.on("playget",(function(e){0===e.round&&ye>6&&Ge(),ye===e.round&&Le!==e.round&&(Le=e.round,Ie=!0,Ne(e.col))})),R.on("userget",(function(e){F=parseInt(e.win),N=parseInt(e.loose),C=Math.max(T,B,F,N,1),"0"===x.role?(null!==e.pic&&(o("P2icon").src=e.pic),e.name.length>0&&(w=e.name,o("P2name").innerHTML=w),Ae(se),e.country&&se.classList.add(e.country.split(" ")[1])):(null!==e.pic&&(o("P1icon").src=e.pic),e.name.length>0&&(p=e.name,o("P1name").innerHTML=p),Ae(re),e.country&&re.classList.add(e.country.split(" ")[1])),Be()})),R.on("quit",(function(){x.id!==W&&(W=x.id,be=!0,Se(o("popupLeft")))}))})),o("bt_easy").addEventListener("click",(function(){X="easy",Re()})),o("bt_med").addEventListener("click",(function(){X="medium",Re()})),o("bt_hard").addEventListener("click",(function(){X="hard",Re()})),Array.from(document.getElementsByClassName("back")).forEach((function(e){e.addEventListener("click",(function(){"online"===X&&(R.disconnect(),o("bt_online").classList.remove("ui-disabled")),be=!0,Pe(),a=!1,Ce(),we=0,he=0,ve=[0,0],X=null,Y.classList.remove("swipe-out"),V.classList.remove("swipe-in"),Y.classList.add("swipe-out-right"),V.classList.add("swipe-in-left"),ke(o("popupDialog")),ke(o("popupLeft"))}))})),o("again").addEventListener("click",(function(){ye>1&&Ge(),ke(o("popupDialog")),"2player"!==X&&"online"!==X&&1===he&&Ue()})),o("bt_img").addEventListener("click",(function(){o("b_image_input").click()})),o("bt_reset").addEventListener("click",(function(){Ee&&(localStorage.removeItem("easy_start"),localStorage.removeItem("easy_win"),localStorage.removeItem("easy_loose"),localStorage.removeItem("easy_draw"),localStorage.removeItem("medium_start"),localStorage.removeItem("medium_win"),localStorage.removeItem("medium_loose"),localStorage.removeItem("medium_draw"),localStorage.removeItem("hard_start"),localStorage.removeItem("hard_win"),localStorage.removeItem("hard_loose"),localStorage.removeItem("hard_draw"),localStorage.removeItem("online_Start"),localStorage.removeItem("online_win"),localStorage.removeItem("online_loose"),localStorage.removeItem("online_draw"),localStorage.removeItem("online_left"),He())})),ne.onchange=function(){var e;""!==(e=this.value).replace(/\s+/g,"")?(Ee&&localStorage.setItem("s_name",e),Q=!0):(Ee&&localStorage.removeItem("s_name"),Q=!1)},ae.onchange=function(){Ke(this.value.toLowerCase())},ae.addEventListener("keyup",(function(e){Ke(this.value.toLowerCase())})),e=0;e<l.length;e+=1)r[e]=document.getElementById(l[e]),s[e]=r[e].getContext("2d"),function(e){r[e].addEventListener("click",(function(){xe(e)}))}(e);ie.childNodes.forEach((function(e){e.addEventListener("click",(function(){for(h=this.className,localStorage.setItem("s_country",this.className);le.firstChild;)le.removeChild(le.firstChild);le.appendChild(this.cloneNode(!0)),ke(o("popupCountry")),ae.value="",Ke("")}))})),document.getElementById("b_image_input").addEventListener("change",Xe,!1),Pe()},window.addEventListener("resize",(function(){Pe()})),document.webL10n.ready((function(){v=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null!==t&&t[1]}("lang"),i=!0,v&&v!==document.webL10n.getLanguage()&&(document.webL10n.setLanguage(v),i=!1)})),document.addEventListener("localized",(function(){i&&(document.documentElement.lang=document.webL10n.getLanguage().substr(0,2),document.querySelector("meta[name='description']").setAttribute("content",document.webL10n.get("lb_desc")),document.querySelector("link[rel='manifest']").href="Manifest/appmanifest_"+document.webL10n.getLanguage().substr(0,2)+".json",document.querySelector("link[rel='canonical']").href="https://grrd01.github.io/4inaRow/?lang="+document.webL10n.getLanguage().substr(0,2),He(),Array.from(ie.getElementsByTagName("LI")).sort((e,t)=>e.textContent.localeCompare(t.textContent)).forEach(e=>ie.appendChild(e))),i=!0}))}();