/*
* grrd's 4 in a Row
* Copyright (c) 2012 Gerard Tyedmers, grrd@gmx.net
* Licensed under the MPL License
*/
!function(){"use strict";function a(a,b,c,d){K[b].beginPath(),K[b].arc(da/2,a,da/2*.85,0,2*Math.PI,!1),K[b].fillStyle=c,K[b].fill(),K[b].lineWidth=da/20,K[b].strokeStyle=d,K[b].stroke()}function b(){var b,c,d=$(window).height(),e=$(window).width();d>e?(da=Math.min((e-50)/7,(d-140)/6),ea=Math.max(6*da*.85,d-190),Ma.attr("style","width:100%;"),$(".li_port").attr("style","height:"+($(window).height()-$(window).width()/3-130)/7+"px;"),$(".li_pad").attr("style","padding-top:"+($(window).height()-$(window).width()/3-270)/14+"px;"),$("#page_landscape").attr("style","display:none;"),$("#page_portrait").attr("style","display:inline;"),$("#indicator_landscape_l").attr("style","display:none;"),$("#indicator_landscape_r").attr("style","display:none;"),$("#indicator_portrait").attr("style","display:block;"),$("#popupDialog_landscape").attr("style","display:none;"),$("#popupDialog_portrait").attr("style","display:block;"),$("#popupSettings_portrait").attr("style","display:block;"),$("#popupSettings_landscape").attr("style","display:none;"),$("#popupSettings_col_b").appendTo("#popupSettings_portrait"),$("#printMessage").attr("style","display:block;")):(da=Math.min((e-140-60)/7,(d-20)/6),ea=Math.max(6*da*.85,d-95),Ma.attr("style","width:"+.6*$(window).width()+"px;"),$("#blank_space").attr("style","height:"+($(window).height()/4-$(window).width()/20)+"px;"),$("#page_landscape").attr("style","display:inline;"),$("#page_portrait").attr("style","display:none;"),$("#indicator_landscape_l").attr("style","display:inline;"),$("#indicator_landscape_r").attr("style","display:inline;"),$("#indicator_portrait").attr("style","display:none;"),$("#popupDialog_landscape").attr("style","display:block;"),$("#popupDialog_portrait").attr("style","display:none;"),$("#popupSettings_portrait").attr("style","display:none;"),$("#popupSettings_landscape").attr("style","display:block;"),$("#popupSettings_col_b").appendTo("#popupSettings_landscape_b"),$("#printMessage").attr("style","display:inline;"));var f=Math.max((d-e/3)/7,0);for($(".a_land").attr("style","width:"+(e/5-8)+"px;padding-bottom:"+f/2+"px;"),$(".img_land").attr("style","padding-top:"+f+"px;padding-bottom:"+f/2+"px;width: 100%;min-width: 40px;max-width: 108px;"),b=0;b<I.length;b+=1)document.getElementById(I[b]).width=da,document.getElementById(I[b]).height=ea;for(c=0;c<L[0].length&&void 0!==K[c];c+=1)for(b=0;b<L.length;b+=1)K[c].beginPath(),K[c].arc(da/2,(L.length-b-.5)*da*.85,da/2*.7,0,2*Math.PI,!1),K[c].lineWidth=da/10,K[c].strokeStyle="#212121",K[c].stroke(),K[c].beginPath(),K[c].arc(da/2,(L.length-b-.5)*da*.85,da/2*.7,1.8*Math.PI,.8*Math.PI,!1),K[c].lineWidth=J[c].width/10,K[c].strokeStyle="grey",K[c].stroke();for(c=0;c<L[0].length&&void 0!==K[c];c+=1){for(K[c].save(),K[c].beginPath(),b=0;b<L.length;b+=1)K[c].arc(da/2,(L.length-b-.5)*da*.85,da/2*.7,0,2*Math.PI,!1);K[c].clip(),K[c].clearRect(0,0,da,ea)}for(b=0;b<L.length;b+=1)for(c=0;c<L[b].length;c+=1)void 0!==L[b][c]&&a((L.length-b-.5)*da*.85,c,Sa[L[b][c]],Ta[L[b][c]]);H&&(ca=ca/ba*(L.length-W-.5)*da*.85,ba=(L.length-W-.5)*da*.85)}function c(){var a,c;for(bb=0,ab=null,a=0;a<L.length;a+=1)for(c=0;c<L[a].length;c+=1)L[a][c]=void 0,0===a&&K[c].clearRect(0,0,da,ea);b()}function d(){$(".P1light").attr("src",Wa[Va]),$(".P2light").attr("src",Xa[1-Va])}function e(){var a,b;a=parseInt(localStorage.getItem(Ga+"_win")||0),b=parseInt(localStorage.getItem(Ga+"_loose")||0),"online"===Ga?(fa=Math.max(a+b,xa+ya,1),$(".P"+(1+parseInt(Aa.role))+".win").width(100/fa*a+"%"),$(".P"+(1+parseInt(Aa.role))+".loose").width(100/fa*b+"%"),$(".P"+(2-parseInt(Aa.role))+".win").width(100/fa*xa+"%"),$(".P"+(2-parseInt(Aa.role))+".loose").width(100/fa*ya+"%")):("2player"===Ga&&(a=Za[0],b=Za[1]),fa=Math.max(a+b,1),$(".P1.win").width(100/fa*a+"%"),$(".P1.loose").width(100/fa*b+"%"),$(".P2.win").width(100/fa*b+"%"),$(".P2.loose").width(100/fa*a+"%"))}function f(a){var b,c;Ga&&a&&(b=Ga+"_"+a,c=parseInt(localStorage.getItem(b)||0)+1,localStorage.setItem(b,c)),la=localStorage.getItem("easy_start")||0,ma=localStorage.getItem("easy_win")||0,na=localStorage.getItem("easy_loose")||0,oa=localStorage.getItem("easy_draw")||0,pa=localStorage.getItem("medium_start")||0,qa=localStorage.getItem("medium_win")||0,ra=localStorage.getItem("medium_loose")||0,sa=localStorage.getItem("medium_draw")||0,ta=localStorage.getItem("hard_start")||0,ua=localStorage.getItem("hard_win")||0,va=localStorage.getItem("hard_loose")||0,wa=localStorage.getItem("hard_draw")||0,ga=localStorage.getItem("online_Start")||0,ha=localStorage.getItem("online_win")||0,ia=localStorage.getItem("online_loose")||0,ja=localStorage.getItem("online_draw")||0,ka=localStorage.getItem("online_left")||0,fa=Math.max(ma,na,qa,ra,ua,va,ha,ia,1),document.getElementById("easy_win").innerHTML=navigator.mozL10n.get("lb_won")+" "+ma,document.getElementById("easy_loose").innerHTML=navigator.mozL10n.get("lb_lost")+" "+na,document.getElementById("medium_win").innerHTML=navigator.mozL10n.get("lb_won")+" "+qa,document.getElementById("medium_loose").innerHTML=navigator.mozL10n.get("lb_lost")+" "+ra,document.getElementById("hard_win").innerHTML=navigator.mozL10n.get("lb_won")+" "+ua,document.getElementById("hard_loose").innerHTML=navigator.mozL10n.get("lb_lost")+" "+va,document.getElementById("online_win").innerHTML=navigator.mozL10n.get("lb_won")+" "+ha,document.getElementById("online_loose").innerHTML=navigator.mozL10n.get("lb_lost")+" "+ia,document.getElementById("easy_win").style.width=100/fa*ma+"%",document.getElementById("easy_loose").style.width=100/fa*na+"%",document.getElementById("medium_win").style.width=100/fa*qa+"%",document.getElementById("medium_loose").style.width=100/fa*ra+"%",document.getElementById("hard_win").style.width=100/fa*ua+"%",document.getElementById("hard_loose").style.width=100/fa*va+"%",document.getElementById("online_win").style.width=100/fa*ha+"%",document.getElementById("online_loose").style.width=100/fa*ia+"%"}function g(){localStorage.removeItem("easy_start"),localStorage.removeItem("easy_win"),localStorage.removeItem("easy_loose"),localStorage.removeItem("easy_draw"),localStorage.removeItem("medium_start"),localStorage.removeItem("medium_win"),localStorage.removeItem("medium_loose"),localStorage.removeItem("medium_draw"),localStorage.removeItem("hard_start"),localStorage.removeItem("hard_win"),localStorage.removeItem("hard_loose"),localStorage.removeItem("hard_draw"),localStorage.removeItem("online_Start"),localStorage.removeItem("online_win"),localStorage.removeItem("online_loose"),localStorage.removeItem("online_draw"),localStorage.removeItem("online_left"),f()}function h(){Ga="2player",Ia?$(".P1icon").attr("src",Ka.attr("src")):$(".P1icon").attr("src","Images/player.png"),S=Ja?La.val():navigator.mozL10n.get("lb_player1"),Q?($("p.P1country").html(document.getElementById("l_country").getElementsByClassName(Q)[0].innerHTML),$(".P1country").attr("class","P1country "+Q),$("div.P1country").addClass("flag_left")):($("p.P1country").html(" "),$(".P1country").attr("class","P1country"),$("div.P1country").addClass("flag_left")),T=navigator.mozL10n.get("lb_player2"),$(".P1name").html(S),$(".P2name").html(T),$(".P2icon").attr("src","Images/player.png"),$(".P2country").attr("class","P2country"),$("p.P2country").html(" "),$("div.P2country").addClass("flag_right"),d(),e(),cb=!1,$.mobile.changePage("#game",{transition:"slide"})}function i(a,b){cb||(b+2e3>(new Date).getTime()&&H?window.requestAnimFrame(function(){i(a,b)}):(Ya+=1,$("#printMessage").html(a),1===Ya?$("#printGames").html(Ya+" "+navigator.mozL10n.get("lb_game")):$("#printGames").html(Ya+" "+navigator.mozL10n.get("lb_games")),$("#printScore1a").html(S),$("#printScore2a").html(T),$("#printScore1b").html(Za[0]),$("#printScore2b").html(Za[1]),$.mobile.changePage("#popupDialog",{transition:"pop",role:"dialog"}),c(),Va=Ya%2!==0?1:0,d(),H=!1))}function j(b,c,d,e){var f;if(!cb)if(6>d&&e+250<(new Date).getTime()&&H){for(d+=1,e=(new Date).getTime(),f=0;4>f;f+=1)d%2!==0?a((L.length-b[f]-.5)*da*.85,c[f],Ua[Va],"white"):a((L.length-b[f]-.5)*da*.85,c[f],Sa[Va],"white");window.requestAnimFrame(function(){j(b,c,d,e)})}else 6>d&&H&&window.requestAnimFrame(function(){j(b,c,d,e)})}function k(){H=!0;var a=Ea.slice(),b=Fa.slice();j(a,b,0,(new Date).getTime())}function l(a,b,c,d,e,f){var g;if(a+3*c<L.length&&b+3*d<L[a].length&&a+3*c>=0&&b+3*d>=0)for(g=0;4>g;g+=1)L[a+g*c][b+g*d]===e?(Ea[g]=a+g*c,Fa[g]=b+g*d,3===g&&(Z=!0,f&&k(),g=5)):g=5}function m(a,b){for(Z=!1,W=0;W<L.length;W+=1)for(V=0;V<L[W].length;V+=1)l(W,V,1,0,a,b),l(W,V,0,1,a,b),l(W,V,1,1,a,b),l(W,V,1,-1,a,b);for(_=!1,V=0;V<L[0].length;V+=1)void 0===L[L.length-1][V]&&(_=!0)}function n(b,c,g){var h,j,k,l;H&&(h=new Date,j=h.getTime(),k=j-b,l=ea*k/1e3,ba>c?(c=Math.min(ba,c+l),b=j,K[g].clearRect(0,0,da,ba+da/2*.85),a(c,g,Sa[Va],Ta[Va]),window.requestAnimFrame(function(){n(b,c,g)})):(Ha&&document.getElementById("click_sound").play(),H=!1,m(Va,!0),Z?(Za[Va]=Za[Va]+1,("easy"===Ga||"medium"===Ga||"hard"===Ga)&&f(0===Va?"win":"loose"),"online"===Ga&&(0===Va&&"0"===Aa.role||1===Va&&"1"===Aa.role?(ya+=1,f("win")):(xa+=1,f("loose"))),e(),Ha&&document.getElementById("ding_sound").play(),0===Va?i(S+" "+navigator.mozL10n.get("lb_win"),(new Date).getTime()):i(T+" "+navigator.mozL10n.get("lb_win"),(new Date).getTime())):_?(Va=1-Va,d(),"2player"!==Ga&&"online"!==Ga&&1===Va&&z()):(f("draw"),i(navigator.mozL10n.get("lb_draw"),(new Date).getTime()))))}function o(a){var b,c;if(!(db&&(db=!1,"online"===Ga&&(0===Va&&"0"===Aa.role||1===Va&&"1"===Aa.role))||H))for(bb+=1,W=0,ba=0;W<L.length&&0===ba;){if(void 0===L[W][a]){H=!0,L[W][a]=Va,ba=(L.length-W-.5)*da*.85,b=new Date,c=b.getTime(),ca=-30,n(c,ca,a);break}W+=1}}function p(){Da=!1,$.mobile.changePage("#popupOnline",{transition:"pop",role:"dialog"}),$(".bt_online").addClass("ui-disabled"),_a?za.socket.reconnect():(za=io.connect("http://grrds4inarow.nodejitsu.com:80"),_a=!0),za.on("connect",function(){}),za.on("startgame",function(a){Aa=a,xa=0,ya=0,Aa.id!==Ba&&(R=Ia?Ka.attr("src"):null,za.emit("usersend",{to:Aa.opponent,name:La.val(),pic:R,country:Q,win:ha,loose:ia}),Ba=Aa.id,cb=!1,null!==Ga&&$.mobile.changePage("#title",{transition:"slide",reverse:!0}),H=!1,c(),Ya=0,Va=0,Za=[0,0],Ga="online",d(),e(),"0"===Aa.role?(Ia?$(".P1icon").attr("src",Ka.attr("src")):$(".P1icon").attr("src","Images/player.png"),S=Ja?La.val():navigator.mozL10n.get("lb_player1"),Q?($("p.P1country").html(document.getElementById("l_country").getElementsByClassName(Q)[0].innerHTML),$(".P1country").attr("class","P1country "+Q),$("div.P1country").addClass("flag_left")):($("p.P1country").html(" "),$(".P1country").attr("class","P1country"),$("div.P1country").addClass("flag_left")),$(".P2icon").attr("src","Images/online.png"),T=navigator.mozL10n.get("bt_online")):($(".P1icon").attr("src","Images/online.png"),S=navigator.mozL10n.get("bt_online"),Ia?$(".P2icon").attr("src",Ka.attr("src")):$(".P2icon").attr("src","Images/player.png"),T=Ja?La.val():navigator.mozL10n.get("lb_player1"),Q?($("p.P2country").html(document.getElementById("l_country").getElementsByClassName(Q)[0].innerHTML),$(".P2country").attr("class","P2country "+Q),$("div.P2country").addClass("flag_right")):($("p.P2country").html(" "),$(".P2country").attr("class","P2country"),$("div.P2country").addClass("flag_right"))),$(".P1name").html(S),$(".P2name").html(T),$.mobile.changePage("#game",{transition:"slide"}))}),za.on("playget",function(a){bb===a.round&&ab!==a.round&&(ab=a.round,db=!0,o(a.col))}),za.on("userget",function(a){xa=parseInt(a.win),ya=parseInt(a.loose),fa=Math.max(ha,ia,xa,ya,1),"0"===Aa.role?(null!==a.pic&&$(".P2icon").attr("src",a.pic),a.name.length>0&&(T=a.name,$(".P2name").html(T)),a.country?($("p.P2country").html(document.getElementById("l_country").getElementsByClassName(a.country)[0].innerHTML),$(".P2country").attr("class","P2country "+a.country),$("div.P2country").addClass("flag_right")):($("p.P2country").html(" "),$(".P2country").attr("class","P2country"),$("div.P2country").addClass("flag_right")),document.getElementById("P1online_win").style.width=100/fa*ha+"%",document.getElementById("P1online_loose").style.width=100/fa*ia+"%",document.getElementById("P2online_win").style.width=100/fa*xa+"%",document.getElementById("P2online_loose").style.width=100/fa*ya+"%"):(null!==a.pic&&$(".P1icon").attr("src",a.pic),a.name.length>0&&(S=a.name,$(".P1name").html(S)),a.country?($("p.P1country").html(document.getElementById("l_country").getElementsByClassName(a.country)[0].innerHTML),$(".P1country").attr("class","P1country "+a.country),$("div.P1country").addClass("flag_left")):($("p.P1country").html(" "),$(".P1country").attr("class","P1country"),$("div.P1country").addClass("flag_left")),document.getElementById("P1online_win").style.width=100/fa*xa+"%",document.getElementById("P1online_loose").style.width=100/fa*ya+"%",document.getElementById("P2online_win").style.width=100/fa*ha+"%",document.getElementById("P2online_loose").style.width=100/fa*ia+"%"),e()}),za.on("quit",function(){Aa.id!==Ca&&(Ca=Aa.id,cb=!0,$.mobile.changePage("#popupLeft",{transition:"pop",role:"dialog"}))})}function q(){Ia?$(".P1icon").attr("src",Ka.attr("src")):$(".P1icon").attr("src","Images/player.png"),S=Ja?La.val():navigator.mozL10n.get("lb_player"),Q?($("p.P1country").html(document.getElementById("l_country").getElementsByClassName(Q)[0].innerHTML),$(".P1country").attr("class","P1country "+Q),$("div.P1country").addClass("flag_left")):($("p.P1country").html(" "),$(".P1country").attr("class","P1country"),$("div.P1country").addClass("flag_left")),T=navigator.mozL10n.get("lb_computer"),$(".P1name").html(S),$(".P2name").html(T),$(".P2icon").attr("src","Images/computer.png"),$("p.P2country").html(" "),$(".P2country").attr("class","P2country"),$("div.P2country").addClass("flag_right"),e(),d(),cb=!1,$.mobile.changePage("#game",{transition:"slide"})}function r(){Ga="easy",q()}function s(){Ga="medium",q()}function t(){Ga="hard",q()}function u(){"online"===Ga&&(za.disconnect(),$(".bt_online").removeClass("ui-disabled")),cb=!0,b(),$.mobile.changePage("#title",{transition:"slide",reverse:!0}),H=!1,c(),Ya=0,Va=0,Za=[0,0],Ga=null}function v(){Ha="on"===Na.val(),localStorage.setItem("s_sound",Na.val()),b(),$.mobile.changePage("#title",{transition:"pop",reverse:!0})}function w(a){"online"===Ga?1===Va&&"0"===Aa.role||0===Va&&"1"===Aa.role||(za.emit("playsend",{to:Aa.opponent,col:a,round:bb}),o(a)):o(a)}function x(a,b,c){var d,e;for(M=0,N=0,O=0,d=c-3;c>=d;d+=1)if(d>=0&&d+3<L[0].length){for($a=!0,P=0,e=0;3>=e;e+=1)void 0!==L[b][d+e]&&(L[b][d+e]===a?P+=1:$a=!1);$a&&(M+=1,N+=P,P>O&&(O=P))}for(d=b+3;d>=b;d-=1)if(d-3>=0&&d<L.length){for($a=!0,P=0,e=0;3>=e;e+=1)void 0!==L[d-e][c]&&(L[d-e][c]===a?P+=1:$a=!1);$a&&(M+=1,N+=P,P>O&&(O=P))}for(d=3;d>=0;d-=1)if(c-d>=0&&c-d+3<L[0].length&&b-d>=0&&b-d+3<L.length){for($a=!0,P=0,e=0;3>=e;e+=1)void 0!==L[b-d+e][c-d+e]&&(L[b-d+e][c-d+e]===a?P+=1:$a=!1);$a&&(M+=1,N+=P,P>O&&(O=P))}for(d=3;d>=0;d-=1)if(c-d>=0&&c-d+3<L[0].length&&b+d<L.length&&b+d-3>=0){for($a=!0,P=0,e=0;3>=e;e+=1)void 0!==L[b+d-e][c-d+e]&&(L[b+d-e][c-d+e]===a?P+=1:$a=!1);$a&&(M+=1,N+=P,P>O&&(O=P))}}function y(a,b){return a-b}function z(){var a;for(Qa=[],aa=!1,X=0;X<L[0].length;X+=1)for(Qa[X]=0,Y=0;Y<L.length;Y+=1)if(void 0===L[Y][X]){L[Y][X]=Va,x(Va,Y,X),Qa[X]=1e4*O+100*M+N+2,L[Y][X]=void 0;break}for(Ra[0]=0,a=0;a<Qa.length;a+=1)Qa[a]>Ra[0]&&(Ra[0]=Qa[a]);for(Va=1-Va,X=0;X<L[0].length;X+=1)for(Y=0;Y<L.length;Y+=1)if(void 0===L[Y][X]){L[Y][X]=Va,x(Va,Y,X),1e4*O+100*M+N+2>Ra[0]&&(Qa[X]=1e4*O+100*M+N+2),L[Y][X]=void 0;break}for(Va=1-Va,Va=1-Va,X=0;X<L[0].length;X+=1){for(Y=0;Y<L.length-1;Y+=1)if(void 0===L[Y][X]){L[Y+1][X]=Va,m(Va,aa),L[Y+1][X]=void 0;break}Z&&(Qa[X]=1,Z=!1)}for(Va=1-Va,Va=1-Va,X=0;X<L[0].length;X+=1){for(Y=0;Y<L.length;Y+=1)if(void 0===L[Y][X]){L[Y][X]=Va,m(Va,aa),L[Y][X]=void 0;break}Z&&(Qa[X]=5e4,Z=!1)}for(Va=1-Va,X=0;X<L[0].length;X+=1){for(Y=0;Y<L.length;Y+=1)if(void 0===L[Y][X]){L[Y][X]=Va,m(Va,aa),L[Y][X]=void 0;break}Z&&(Qa[X]=6e4,Z=!1)}if(Ra=Qa.slice(),Ra.sort(y),Ra.reverse(),V=Math.round(6*Math.random()),"hard"===Ga)for(;Qa[V]!==Ra[0];)V=Math.round(6*Math.random());if("medium"===Ga)for(;Qa[V]<Ra[1]||0===Qa[V];)V=Math.round(6*Math.random());if("easy"===Ga)for(;Qa[V]<Ra[2]||0===Qa[V];)V=Math.round(6*Math.random());o(V)}function A(){$.mobile.changePage("#game",{transition:"pop",reverse:!0}),"2player"!==Ga&&"online"!==Ga&&1===Va&&z()}function B(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null!==d?d[1]:!1}function C(a){var b=new FileReader,c=document.createElement("canvas"),d=null,e=new Image,f=67,g=71,h={Orientation:void 0};c.id="hiddenCanvas",c.width=f,c.height=g,c.style.visibility="hidden",document.body.appendChild(c),d=c.getContext("2d"),a.target.files[0].type.match("image.*")?b.readAsDataURL(a.target.files[0]):alert("File is not an image"),b.onload=function(){var a=this.result;h=EXIF.readFromBinaryFile(new BinaryFile(atob(a.split(",")[1]))),e.src=a},e.onload=function(){var a=0,b=0;0===this.width||0===this.height?alert("Image is empty"):((5===h.Orientation||6===h.Orientation)&&(d.rotate(90*Math.PI/180),b=-1*f,f=71,g=67),(3===h.Orientation||4===h.Orientation)&&(d.rotate(180*Math.PI/180),b=-1*f-4,a=-1*g+4),(7===h.Orientation||8===h.Orientation)&&(d.rotate(270*Math.PI/180),a=-1*g,f=71,g=67),d.clearRect(0,0,f,g),d.drawImage(e,0,0,this.width,this.height,a,b,f,g),Ka.attr("src",c.toDataURL("image/jpeg")),$("#inputImage_l").attr("src",c.toDataURL("image/jpeg")),localStorage.setItem("s_image",c.toDataURL("image/jpeg")),Ia=!0)}}function D(a){""!==a.replace(/\s+/g,"")?(localStorage.setItem("s_name",a),Ja=!0):(localStorage.removeItem("s_name"),Ja=!1)}function E(a){var b=Oa.find("li");b.each(function(b,c){var d=$(c);d[0].innerHTML.toLowerCase().indexOf(a)>-1||0===a.length?d.show():d.hide()})}function F(){$("#b_image_input").click()}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var G,H=!1,I=["col0","col1","col2","col3","col4","col5","col6"],J=[],K=[],L=[];for(G=0;6>G;G+=1)L[G]=[],L[G][6]=void 0;var M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea=[],Fa=[],Ga=null,Ha=!0,Ia=!1,Ja=!1,Ka=$("#inputImage"),La=$("#inputName"),Ma=$("#img_title"),Na=$("#b_sound"),Oa=$("#l_country"),Pa=$("#txt_search"),Qa=[],Ra=[],Sa=["#ff0080","#6969EE"],Ta=["#D6016B","#5A5ACE"],Ua=["#FD6BB4","#9393EF"],Va=0,Wa=["Images/red_on.png","Images/red_off.png"],Xa=["Images/blue_on.png","Images/blue_off.png"],Ya=0,Za=[0,0],$a=Boolean(!1),_a=!1,ab=null,bb=0,cb=!1,db=!1;$(document).on("pageshow","#game",function(){Da=!0}),window.onload=function(){var a;if(null===localStorage.getItem("s_sound")?Na.val("on"):Na.val(localStorage.getItem("s_sound")),Ha="on"===Na.val(),null!==localStorage.getItem("s_image")&&(Ka.attr("src",localStorage.getItem("s_image")),$("#inputImage_l").attr("src",localStorage.getItem("s_image")),Ia=!0),null!==localStorage.getItem("s_name")&&(La.val(localStorage.getItem("s_name")),""!==localStorage.getItem("s_name").replace(/\s+/g,"")&&(Ja=!0)),null!==localStorage.getItem("s_country")){$("#bt_country").empty(),Q=localStorage.getItem("s_country");var c=document.getElementsByClassName(Q);document.getElementById("bt_country").appendChild(c[0].cloneNode(!0))}for(U=B("theme"),U&&"mi"===U&&(Ma.attr("src","Images/title1_mi.png"),$(".tit1").attr("src","Images/title1_mi.png"),$(".tit2").attr("src","Images/title2_mi.png")),$(".bt_play").click(function(a){h(),a.preventDefault()}),$(".bt_online").click(function(a){p(),a.preventDefault()}),$(".bt_easy").click(function(a){r(),a.preventDefault()}),$(".bt_med").click(function(a){s(),a.preventDefault()}),$(".bt_hard").click(function(a){t(),a.preventDefault()}),$(".back").click(function(a){u(),a.preventDefault()}),$(".again").click(function(a){A(),a.preventDefault()}),$(".bt_img").click(function(a){F(),a.preventDefault()}),$(".bt_close").click(function(a){v(),a.preventDefault()}),$("#bt_reset").click(function(a){g(),a.preventDefault()}),La.change(function(){D(this.value)}),Pa.change(function(){E(this.value.toLowerCase())}),Pa.keyup(function(){E(this.value.toLowerCase())}),a=0;a<I.length;a+=1)J[a]=document.getElementById(I[a]),K[a]=J[a].getContext("2d"),function(a){J[a].addEventListener("click",function(){w(a)})}(a);Oa.children().click(function(){Q=this.className,localStorage.setItem("s_country",this.className),$("#bt_country").empty(),document.getElementById("bt_country").appendChild(this.cloneNode(!0)),$("#popupCountry").popup("close"),Pa.val(""),E("")}),jQuery.preLoadImages(["Images/red_on.png","Images/red_off.png","Images/blue_on.png","Images/blue_off.png","Images/title2eng.png"]),document.getElementById("b_image_input").addEventListener("change",C,!1),$("#popupSettings_col_b").find("label").attr("style","display:inline;"),b(),Ma.delay(1500),Ma.fadeOut(1e3),Ma.queue(function(){U=B("theme"),U&&"mi"===U?Ma.attr("src","Images/title2_mi.png"):Ma.attr("src","Images/title2eng.png"),$(this).fadeIn(1e3),$(this).dequeue()})},$(window).resize(function(){b()}),function(a){var b,c,d=[];a.preLoadImages=function(a){var e=a.length-1;for(c=e;c>=0;c-=1)b=document.createElement("img"),b.src=a[c],d.push(b)}}(jQuery),navigator.mozL10n.ready(function(){U=B("lang"),U&&U!==navigator.mozL10n.language.code&&(navigator.mozL10n.language.code=U),f()})}();