/**
 * grrd's 4 in a Row
 * Copyright (c) 2012 Gerard Tyedmers, grrd@gmx.net
 * @license MPL-2.0
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
!function(){"use strict";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var e,t,n,o=function(e){return document.getElementById(e)},i=!1,a=!1,l=["col0","col1","col2","col3","col4","col5","col6"],r=[],s=[],c=[];for(e=0;e<6;e+=1)c[e]=[],c[e][6]=void 0;var A,d,m,g,u,h,f,p,w,v,_,I,L,y,b,E,S,B,k,M,Q,C,P,T,D,R,H,G,x,F,O,q,N,z,j=[],U=[],W=null,Y=!0,K=!1,X=!1,Z=o("game"),J=o("title"),V=o("popupInfo"),$=o("popupStats"),ee=o("popupSettings"),te=o("inputImage"),ne=o("inputName"),oe=o("b_sound"),ie=o("l_country"),ae=o("txt_search"),le=o("bt_country"),re=o("P1country"),se=o("P2country"),ce=[],Ae=[],de=["#ff0080","#6969EE"],me=["#D6016B","#5A5ACE"],ge=["#FD6BB4","#9393EF"],ue=0,he=["Images/red_on.png","Images/red_off.png"],fe=["Images/blue_on.png","Images/blue_off.png"],pe=0,we=[0,0],ve=Boolean(!1),_e=null,Ie=0,Le=!1,ye=!1,be=function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();function Ee(e){e.classList.remove("popup-init"),e.classList.remove("popup-hide"),e.classList.add("popup-show")}function Se(e){e.classList.remove("popup-show"),e.classList.add("popup-hide"),setTimeout((function(){e.scrollTop=0}),1050)}function Be(e,t,n,o){s[t].beginPath(),s[t].arc(B/2,e,B/2*.85,0,2*Math.PI,!1),s[t].fillStyle=n,s[t].fill(),s[t].lineWidth=B/20,s[t].strokeStyle=o,s[t].stroke()}function ke(){var e,o,i;for(t=document.documentElement.clientHeight,n=document.documentElement.clientWidth,t>n?(B=Math.min((n-50)/7,(t-140)/6),k=Math.max(6*B*.85,t-190)):(B=Math.min((n-140-60)/7,(t-20)/6),k=Math.max(6*B*.85,t-95)),e=0;e<l.length;e+=1)document.getElementById(l[e]).width=B,document.getElementById(l[e]).height=k;for(o=0;o<c[0].length&&void 0!==s[o];o+=1)for(e=0;e<c.length;e+=1)(i=s[o].createLinearGradient(0,.9*(c.length-e-1)*B,.7*B,.9*(c.length-e-1)*B+.7*B)).addColorStop(0,"black"),i.addColorStop(1,"grey"),s[o].beginPath(),s[o].arc(B/2,(c.length-e-.5)*B*.85,B/2*.7,0,2*Math.PI,!1),s[o].lineWidth=B/10,s[o].strokeStyle=i,s[o].stroke();for(o=0;o<c[0].length&&void 0!==s[o];o+=1){for(s[o].save(),s[o].beginPath(),e=0;e<c.length;e+=1)s[o].arc(B/2,(c.length-e-.5)*B*.85,B/2*.7,0,2*Math.PI,!1);s[o].clip(),s[o].clearRect(0,0,B,k)}for(e=0;e<c.length;e+=1)for(o=0;o<c[e].length;o+=1)void 0!==c[e][o]&&Be((c.length-e-.5)*B*.85,o,de[c[e][o]],me[c[e][o]]);a&&(S=S/E*((c.length-_-.5)*B*.85),E=(c.length-_-.5)*B*.85)}function Me(){var e,t;for(Ie=0,_e=null,e=0;e<c.length;e+=1)for(t=0;t<c[e].length;t+=1)c[e][t]=void 0,0===e&&s[t].clearRect(0,0,B,k);ke()}function Qe(){o("P1light").src=he[ue],o("P2light").src=fe[1-ue]}function Ce(){var e,t;be?(e=parseInt(localStorage.getItem(W+"_win")||0),t=parseInt(localStorage.getItem(W+"_loose")||0)):(e=0,t=0),"online"===W?(M=Math.max(e+t,x+F,1),o("P"+(1+parseInt(q.role))+"win").style.width=100/M*e+"%",o("P"+(1+parseInt(q.role))+"loose").style.width=100/M*t+"%",o("P"+(2-parseInt(q.role))+"win").style.width=100/M*x+"%",o("P"+(2-parseInt(q.role))+"loose").style.width=100/M*F+"%"):("2player"===W&&(e=we[0],t=we[1]),M=Math.max(e+t,1),o("P1win").style.width=100/M*e+"%",o("P1loose").style.width=100/M*t+"%",o("P2win").style.width=100/M*t+"%",o("P2loose").style.width=100/M*e+"%")}function Pe(e){var t,n;be&&(W&&e&&(t=W+"_"+e,n=parseInt(localStorage.getItem(t)||0)+1,localStorage.setItem(t,n)),P=localStorage.getItem("easy_win")||0,T=localStorage.getItem("easy_loose")||0,D=localStorage.getItem("medium_win")||0,R=localStorage.getItem("medium_loose")||0,H=localStorage.getItem("hard_win")||0,G=localStorage.getItem("hard_loose")||0,Q=localStorage.getItem("online_win")||0,C=localStorage.getItem("online_loose")||0,M=Math.max(P,T,D,R,H,G,Q,C,1),document.getElementById("easy_win").innerHTML=document.webL10n.get("lb_won")+" "+P,document.getElementById("easy_loose").innerHTML=document.webL10n.get("lb_lost")+" "+T,document.getElementById("medium_win").innerHTML=document.webL10n.get("lb_won")+" "+D,document.getElementById("medium_loose").innerHTML=document.webL10n.get("lb_lost")+" "+R,document.getElementById("hard_win").innerHTML=document.webL10n.get("lb_won")+" "+H,document.getElementById("hard_loose").innerHTML=document.webL10n.get("lb_lost")+" "+G,document.getElementById("online_win").innerHTML=document.webL10n.get("lb_won")+" "+Q,document.getElementById("online_loose").innerHTML=document.webL10n.get("lb_lost")+" "+C,document.getElementById("easy_win").style.width=100/M*P+"%",document.getElementById("easy_loose").style.width=100/M*T+"%",document.getElementById("medium_win").style.width=100/M*D+"%",document.getElementById("medium_loose").style.width=100/M*R+"%",document.getElementById("hard_win").style.width=100/M*H+"%",document.getElementById("hard_loose").style.width=100/M*G+"%",document.getElementById("online_win").style.width=100/M*Q+"%",document.getElementById("online_loose").style.width=100/M*C+"%")}function Te(e){e.classList.remove("_African_Union","_Arab_League","_ASEAN","_CARICOM","_CIS","_Commonwealth","_England","_European_Union","_Islamic_Conference","_Kosovo","_NATO","_Northern_Cyprus","_Northern_Ireland","_Olimpic_Movement","_OPEC","_Red_Cross","_Scotland","_Somaliland","_Tibet","_United_Nations","_Wales","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bw","by","bz","ca","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","fi","fj","fm","fo","fr","ga","gb","gd","ge","gg","gh","gi","gl","gm","gn","gp","gq","gr","gt","gu","gw","gy","hk","hn","hr","ht","hu","id","mc","ie","il","im","in","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","md","me","mg","mh","mk","ml","mm","mn","mo","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","ng","ni","nl","no","np","nr","nz","om","pa","pe","pf","pg","ph","pk","pl","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","si","sk","sl","sm","sn","so","sr","st","sv","sy","sz","tc","td","tg","th","tj","tl","tm","tn","to","tr","tt","tv","tw","tz","ua","ug","us","uy","uz","va","vc","ve","vg","vi","vn","vu","ws","ye","za","zm","zw")}function De(e,t){Le||(t+2e3>Date.now()&&a?window.requestAnimFrame((function(){De(e,t)})):(pe+=1,o("printMessage").innerHTML=e,o("printGames").innerHTML=1===pe?pe+" "+document.webL10n.get("lb_game"):pe+" "+document.webL10n.get("lb_games"),o("printScore1a").innerHTML=f,o("printScore2a").innerHTML=p,o("printScore1b").innerHTML=we[0],o("printScore2b").innerHTML=we[1],Ee(o("popupDialog")),a=!1))}function Re(){a=!0,function e(t,n,o,i){var l;if(!Le)if(o<6&&i+250<Date.now()&&a){for(o+=1,i=Date.now(),l=0;l<4;l+=1)Be((c.length-t[l]-.5)*B*.85,n[l],o%2!=0?ge[ue]:de[ue],"white");window.requestAnimFrame((function(){e(t,n,o,i)}))}else o<6&&a&&window.requestAnimFrame((function(){e(t,n,o,i)}))}(j.slice(),U.slice(),0,Date.now())}function He(e,t,n,o,i,a){var l;if(e+3*n<c.length&&t+3*o<c[e].length&&e+3*n>=0&&t+3*o>=0)for(l=0;l<4;l+=1)c[e+l*n][t+l*o]===i?(j[l]=e+l*n,U[l]=t+l*o,3===l&&(y=!0,a&&Re(),l=5)):l=5}function Ge(e,t){for(y=!1,_=0;_<c.length;_+=1)for(v=0;v<c[_].length;v+=1)He(_,v,1,0,e,t),He(_,v,0,1,e,t),He(_,v,1,1,e,t),He(_,v,1,-1,e,t);for(b=!1,v=0;v<c[0].length;v+=1)void 0===c[c.length-1][v]&&(b=!0)}function xe(e,t,n){var o,i;a&&(o=(new Date).getTime(),i=k*(o-e)/1e3,t<E?(t=Math.min(E,t+i),e=o,s[n].clearRect(0,0,B,E+B/2*.85),Be(t,n,de[ue],me[ue]),window.requestAnimFrame((function(){xe(e,t,n)}))):(Y&&document.getElementById("click_sound").play(),a=!1,Ge(ue,!0),y?(we[ue]=we[ue]+1,"easy"!==W&&"medium"!==W&&"hard"!==W||Pe(0===ue?"win":"loose"),"online"===W&&(0===ue&&"0"===q.role||1===ue&&"1"===q.role?(F+=1,Pe("win")):(x+=1,Pe("loose"))),Ce(),Y&&document.getElementById("ding_sound").play(),De(0===ue?f+" "+document.webL10n.get("lb_win"):p+" "+document.webL10n.get("lb_win"),Date.now())):b?(ue=1-ue,Qe(),"2player"!==W&&"online"!==W&&1===ue&&je()):(Pe("draw"),De(document.webL10n.get("lb_draw"),Date.now()))))}function Fe(e){if(!(ye&&(ye=!1,"online"===W&&(0===ue&&"0"===q.role||1===ue&&"1"===q.role))||a))for(Ie+=1,_=0,E=0;_<c.length&&0===E;){if(void 0===c[_][e]){a=!0,c[_][e]=ue,E=(c.length-_-.5)*B*.85,xe((new Date).getTime(),S=-30,e);break}_+=1}}function Oe(){o("P1icon").src=K?te.src:"Images/player.svg",f=X?ne.value:document.webL10n.get("lb_player"),Te(re),u&&re.classList.add(u.split(" ")[1]),p=document.webL10n.get("lb_computer"),o("P1name").innerHTML=f,o("P2name").innerHTML=p,o("P2icon").src="Images/computer.svg",Te(se),Ce(),Qe(),Le=!1,J.classList.remove("swipe-out-right"),Z.classList.remove("swipe-in-left"),J.classList.add("swipe-out"),Z.classList.add("swipe-in")}function qe(e){"online"===W?1===ue&&"0"===q.role||0===ue&&"1"===q.role||(O.emit("playsend",{to:q.opponent,col:e,round:Ie}),Fe(e)):Fe(e)}function Ne(e,t,n){var o,i;for(A=0,d=0,m=0,o=n-3;o<=n;o+=1)if(o>=0&&o+3<c[0].length){for(ve=!0,g=0,i=0;i<=3;i+=1)void 0!==c[t][o+i]&&(c[t][o+i]===e?g+=1:ve=!1);ve&&(A+=1,d+=g,g>m&&(m=g))}for(o=t+3;o>=t;o-=1)if(o-3>=0&&o<c.length){for(ve=!0,g=0,i=0;i<=3;i+=1)void 0!==c[o-i][n]&&(c[o-i][n]===e?g+=1:ve=!1);ve&&(A+=1,d+=g,g>m&&(m=g))}for(o=3;o>=0;o-=1)if(n-o>=0&&n-o+3<c[0].length&&t-o>=0&&t-o+3<c.length){for(ve=!0,g=0,i=0;i<=3;i+=1)void 0!==c[t-o+i][n-o+i]&&(c[t-o+i][n-o+i]===e?g+=1:ve=!1);ve&&(A+=1,d+=g,g>m&&(m=g))}for(o=3;o>=0;o-=1)if(n-o>=0&&n-o+3<c[0].length&&t+o<c.length&&t+o-3>=0){for(ve=!0,g=0,i=0;i<=3;i+=1)void 0!==c[t+o-i][n-o+i]&&(c[t+o-i][n-o+i]===e?g+=1:ve=!1);ve&&(A+=1,d+=g,g>m&&(m=g))}}function ze(e,t){return e-t}function je(){var e;for(ce=[],!1,I=0;I<c[0].length;I+=1)for(ce[I]=0,L=0;L<c.length;L+=1)if(void 0===c[L][I]){c[L][I]=ue,Ne(ue,L,I),ce[I]=1e4*m+100*A+d+2,c[L][I]=void 0;break}for(Ae[0]=0,e=0;e<ce.length;e+=1)ce[e]>Ae[0]&&(Ae[0]=ce[e]);for(ue=1-ue,I=0;I<c[0].length;I+=1)for(L=0;L<c.length;L+=1)if(void 0===c[L][I]){c[L][I]=ue,Ne(ue,L,I),1e4*m+100*A+d+2>Ae[0]&&(ce[I]=1e4*m+100*A+d+2),c[L][I]=void 0;break}for(ue=1-(ue=1-ue),I=0;I<c[0].length;I+=1){for(L=0;L<c.length-1;L+=1)if(void 0===c[L][I]){c[L+1][I]=ue,Ge(ue,!1),c[L+1][I]=void 0;break}y&&(ce[I]=1,y=!1)}for(ue=1-(ue=1-ue),I=0;I<c[0].length;I+=1){for(L=0;L<c.length;L+=1)if(void 0===c[L][I]){c[L][I]=ue,Ge(ue,!1),c[L][I]=void 0;break}y&&(ce[I]=5e4,y=!1)}for(ue=1-ue,I=0;I<c[0].length;I+=1){for(L=0;L<c.length;L+=1)if(void 0===c[L][I]){c[L][I]=ue,Ge(ue,!1),c[L][I]=void 0;break}y&&(ce[I]=6e4,y=!1)}if((Ae=ce.slice()).sort(ze),Ae.reverse(),v=Math.round(6*Math.random()),"hard"===W)for(;ce[v]!==Ae[0];)v=Math.round(6*Math.random());if("medium"===W)for(;ce[v]<Ae[1]||0===ce[v];)v=Math.round(6*Math.random());if("easy"===W)for(;ce[v]<Ae[2]||0===ce[v];)v=Math.round(6*Math.random());Fe(v)}function Ue(){Me(),ue=pe%2!=0?1:0,Qe()}"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("sw.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))})),navigator.onLine&&"undefined"!=typeof io||o("bt_online").classList.add("ui-disabled");const We=new Promise((e,t)=>{const n=new Image;n.onload=()=>{e(1===n.naturalWidth)},n.onerror=t,n.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z"});function Ye(e){var t=new FileReader,n=document.createElement("canvas"),o=null,i=new Image,a=67,l=71,r={Orientation:void 0};n.id="hiddenCanvas",n.width=a,n.height=l,n.style.visibility="hidden",document.body.appendChild(n),o=n.getContext("2d"),e.target.files[0].type.match("image.*")?t.readAsDataURL(e.target.files[0]):alert("File is not an image"),t.onload=function(){var t=this.result;EXIF.getData(e.target.files[0],(function(){r.Orientation=EXIF.getTag(this,"Orientation"),i.src=t}))},i.onload=function(){var e=0,t=0;0===this.width||0===this.height?alert("Image is empty"):(We||(5!==r.Orientation&&6!==r.Orientation||(o.rotate(90*Math.PI/180),t=-1*a,a=71,l=67),3!==r.Orientation&&4!==r.Orientation||(o.rotate(180*Math.PI/180),t=-1*a-4,e=-1*l+4),7!==r.Orientation&&8!==r.Orientation||(o.rotate(270*Math.PI/180),e=-1*l,a=71,l=67)),o.clearRect(0,0,a,l),o.drawImage(i,0,0,this.width,this.height,e,t,a,l),te.src=n.toDataURL("image/jpeg"),be&&localStorage.setItem("s_image",n.toDataURL("image/jpeg")),K=!0)}}function Ke(e){Array.from(ie.getElementsByTagName("LI")).forEach((function(t){t.innerHTML.toLowerCase().indexOf(e)>-1||0===e.length?t.style.display="block":t.style.display="none"}))}window.onload=function(){var e;if(be&&null!==localStorage.getItem("s_sound")?oe.checked="on"===localStorage.getItem("s_sound"):oe.checked=!0,Y=oe.checked,be&&null!==localStorage.getItem("s_image")&&(te.src=localStorage.getItem("s_image"),K=!0),be&&null!==localStorage.getItem("s_name")&&(ne.value=localStorage.getItem("s_name"),""!==localStorage.getItem("s_name").replace(/\s+/g,"")&&(X=!0)),be&&null!==localStorage.getItem("s_country")){for(;le.firstChild;)le.removeChild(le.firstChild);u=localStorage.getItem("s_country");var t=document.getElementsByClassName(u);le.appendChild(t[0].cloneNode(!0))}for(o("iInfo").addEventListener("click",(function(){Ee(V)})),o("iInfoClose").addEventListener("click",(function(){Se(V)})),o("iStats").addEventListener("click",(function(){Ee($)})),o("iStatsClose").addEventListener("click",(function(){Se($)})),o("iSettings").addEventListener("click",(function(){Ee(ee)})),o("iSettingsClose").addEventListener("click",(function(){Y=oe.checked,be&&localStorage.setItem("s_sound",oe.checked?"on":"off"),Se(ee)})),o("iOnlineClose").addEventListener("click",(function(){Se(o("popupOnline"))})),o("bt_country_popup").addEventListener("click",(function(){Ee(o("popupCountry"))})),o("bt_play").addEventListener("click",(function(){W="2player",o("P1icon").src=K?te.src:"Images/player.svg",f=X?ne.value:document.webL10n.get("lb_player1"),Te(re),u&&re.classList.add(u.split(" ")[1]),Te(se),p=document.webL10n.get("lb_player2"),o("P1name").innerHTML=f,o("P2name").innerHTML=p,o("P2icon").src="Images/player.svg",Qe(),Ce(),Le=!1,J.classList.remove("swipe-out-right"),Z.classList.remove("swipe-in-left"),J.classList.add("swipe-out"),Z.classList.add("swipe-in")})),o("bt_online").addEventListener("click",(function(){Ee(o("popupOnline")),o("bt_online").classList.add("ui-disabled"),(O=io.connect("https://grrd.a2hosted.com:49152",{forceNew:!0})).heartbeatTimeout=2e4,O.on("connect",(function(){})),O.on("startgame",(function(e){x=0,F=0,(q=e).id!==N&&(h=K?te.src:null,O.emit("usersend",{to:q.opponent,name:ne.value,pic:h,country:u,win:Q,loose:C}),N=q.id,Le=!1,null!==W&&(J.classList.remove("swipe-out"),Z.classList.remove("swipe-in"),J.classList.add("swipe-out-right"),Z.classList.add("swipe-in-left")),a=!1,Me(),pe=0,ue=0,we=[0,0],W="online",Qe(),Ce(),"0"===q.role?(o("P1icon").src=K?te.src:"Images/player.svg",f=X?ne.value:document.webL10n.get("lb_player1"),Te(re),u&&re.classList.add(u.split(" ")[1]),Te(se),o("P2icon").src="Images/online.svg",p=document.webL10n.get("bt_online")):(Te(re),o("P1icon").src="Images/online.svg",f=document.webL10n.get("bt_online"),o("P2icon").src=K?te.src:"Images/player.svg",p=X?ne.value:document.webL10n.get("lb_player1"),Te(se),u&&se.classList.add(u.split(" ")[1])),o("P1name").innerHTML=f,o("P2name").innerHTML=p,J.classList.remove("swipe-out-right"),Z.classList.remove("swipe-in-left"),J.classList.add("swipe-out"),Z.classList.add("swipe-in"),Se(o("popupOnline")))})),O.on("playget",(function(e){0===e.round&&Ie>6&&Ue(),Ie===e.round&&_e!==e.round&&(_e=e.round,ye=!0,Fe(e.col))})),O.on("userget",(function(e){x=parseInt(e.win),F=parseInt(e.loose),M=Math.max(Q,C,x,F,1),"0"===q.role?(null!==e.pic&&(o("P2icon").src=e.pic),e.name.length>0&&(p=e.name,o("P2name").innerHTML=p),Te(se),e.country&&se.classList.add(e.country.split(" ")[1])):(null!==e.pic&&(o("P1icon").src=e.pic),e.name.length>0&&(f=e.name,o("P1name").innerHTML=f),Te(re),e.country&&re.classList.add(e.country.split(" ")[1])),Ce()})),O.on("quit",(function(){q.id!==z&&(z=q.id,Le=!0,Ee(o("popupLeft")))}))})),o("bt_easy").addEventListener("click",(function(){W="easy",Oe()})),o("bt_med").addEventListener("click",(function(){W="medium",Oe()})),o("bt_hard").addEventListener("click",(function(){W="hard",Oe()})),Array.from(document.getElementsByClassName("back")).forEach((function(e){e.addEventListener("click",(function(){"online"===W&&(O.disconnect(),o("bt_online").classList.remove("ui-disabled")),Le=!0,ke(),a=!1,Me(),pe=0,ue=0,we=[0,0],W=null,J.classList.remove("swipe-out"),Z.classList.remove("swipe-in"),J.classList.add("swipe-out-right"),Z.classList.add("swipe-in-left"),Se(o("popupDialog")),Se(o("popupLeft"))}))})),o("again").addEventListener("click",(function(){Ie>1&&Ue(),Se(o("popupDialog")),"2player"!==W&&"online"!==W&&1===ue&&je()})),o("bt_img").addEventListener("click",(function(){o("b_image_input").click()})),o("bt_reset").addEventListener("click",(function(){be&&(localStorage.removeItem("easy_start"),localStorage.removeItem("easy_win"),localStorage.removeItem("easy_loose"),localStorage.removeItem("easy_draw"),localStorage.removeItem("medium_start"),localStorage.removeItem("medium_win"),localStorage.removeItem("medium_loose"),localStorage.removeItem("medium_draw"),localStorage.removeItem("hard_start"),localStorage.removeItem("hard_win"),localStorage.removeItem("hard_loose"),localStorage.removeItem("hard_draw"),localStorage.removeItem("online_Start"),localStorage.removeItem("online_win"),localStorage.removeItem("online_loose"),localStorage.removeItem("online_draw"),localStorage.removeItem("online_left"),Pe())})),ne.onchange=function(){var e;""!==(e=this.value).replace(/\s+/g,"")?(be&&localStorage.setItem("s_name",e),X=!0):(be&&localStorage.removeItem("s_name"),X=!1)},ae.onchange=function(){Ke(this.value.toLowerCase())},ae.addEventListener("keyup",(function(e){Ke(this.value.toLowerCase())})),e=0;e<l.length;e+=1)r[e]=document.getElementById(l[e]),s[e]=r[e].getContext("2d"),function(e){r[e].addEventListener("click",(function(){qe(e)}))}(e);ie.childNodes.forEach((function(e){e.addEventListener("click",(function(){for(u=this.className,localStorage.setItem("s_country",this.className);le.firstChild;)le.removeChild(le.firstChild);le.appendChild(this.cloneNode(!0)),Se(o("popupCountry")),ae.value="",Ke("")}))})),document.getElementById("b_image_input").addEventListener("change",Ye,!1),ke()},window.addEventListener("resize",(function(){ke()})),document.webL10n.ready((function(){w=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null!==t&&t[1]}("lang"),i=!0,w&&w!==document.webL10n.getLanguage()&&(document.webL10n.setLanguage(w),i=!1)})),document.addEventListener("localized",(function(){i&&(document.documentElement.lang=document.webL10n.getLanguage().substr(0,2),document.querySelector("meta[name='description']").setAttribute("content",document.webL10n.get("lb_desc")),document.querySelector("link[rel='manifest']").href="Manifest/appmanifest_"+document.webL10n.getLanguage().substr(0,2)+".json",document.querySelector("link[rel='canonical']").href="https://grrd01.github.io/4inaRow/?lang="+document.webL10n.getLanguage().substr(0,2),Pe(),Array.from(ie.getElementsByTagName("LI")).sort((e,t)=>e.textContent.localeCompare(t.textContent)).forEach(e=>ie.appendChild(e))),i=!0}))}();